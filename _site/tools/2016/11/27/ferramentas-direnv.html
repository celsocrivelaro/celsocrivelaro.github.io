<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Direnv para Variáveis de Ambiente e PATH</title>
  <meta name="description" content="Sharing a little bit of my experience and ideas.">
  <link rel="canonical" href="http://localhost:4000/tools/2016/11/27/ferramentas-direnv.html">
  <link rel="alternate" type="application/rss+xml" title="Celso Crivelaro Feed"
    href="http://localhost:4000/feed.xml">
  
  <!-- Styles -->
  <link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700,700i%7CNoto+Serif:400,400i,700,700i&display=swap" rel="stylesheet">
  <link href="/assets/css/style.css" rel="stylesheet">
</head>
<body>

  <div id="page" class="site">
    <div class="inner">
      <header class="site-header">
  
  <p class="site-title"><a class="logo-text" href="/">Celso Crivelaro</a></p>
  
  <nav class="site-navigation">
    <div class="site-navigation-wrap">
      <h2 class="screen-reader-text">Main navigation</h2>
      <ul class="menu">
        
      </ul><!-- .menu -->
      <button id="menu-close" class="menu-toggle"><span class="screen-reader-text">Close Menu</span><span
          class="icon-close" aria-hidden="true"></span></button>
    </div><!-- .site-navigation-wrap -->
  </nav><!-- .site-navigation -->
  <button id="menu-open" class="menu-toggle"><span class="screen-reader-text">Open Menu</span><span class="icon-menu" aria-hidden="true"></span></button>
</header>


      <main class="main-content fadeInDown delay_075s">

  <article class="post">
    <header class="post-header">
      <time class="post-date" datetime="2016-11-27">November 27, 2016</time>
      <h1 class="post-title">Direnv para Variáveis de Ambiente e PATH</h1>
      <div class="post-meta">
        By <span class="post-author">John Doe</span><span class="post-tags"> in <a href="/tags/#tools" rel="tag">tools</a></span>
      </div><!-- .post-meta -->
      
    </header><!-- .post-header -->
    <div class="post-content">
      <p>Direnv é uma ferramenta tão útil que fiquei impressionado em ter descoberto agora. O seu objetivo é a gestão de variáveis de ambiente por diretório e a gestão da variável de ambiente PATH.</p>

<p>De acordo com o <a href="https://12factor.net/pt_br/config">The Twelve-Factor App</a>, é uma  boa prática que as configurações estejam como  variáveis de ambiente. Alguns frameworks permitem que suas configurações sejam divididas por ambiente como o Rails e Phoenix, mas isso não é geral, especialmente para frameworks simples como PyBottle ou se usa bash scripts.</p>

<p>Como prefiro ferramentas agnósticas (que não seja ligado apenas à uma linguagem ou framework), o Direnv entra como uma ótima opção da configuração de ambiente de desenvolvimento.</p>

<p>No Mac, a sua instalação é simples:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>brew <span class="nb">install </span>direnv </code></pre></figure>

<p>O mesmo no Ubuntu/Debian:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>direnv </code></pre></figure>

<p>Depois disto, precisa adicionar a inicialização na configuração do Bash. Se usa Bash tradicional, só adicionar no ~/.bashrc</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">eval</span> <span class="s2">"</span><span class="si">$(</span>direnv hook bash<span class="si">)</span><span class="s2">"</span></code></pre></figure>

<p>Para outros bashes como Zsh, Fish, veja a documentação: <a href="http://direnv.net/">http://direnv.net/</a></p>

<h2 id="variáveis-de-ambiente">Variáveis de Ambiente</h2>

<p>Basta criar um arquivo .envrc no diretório em que está o projeto com o conteúdo:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">  <span class="nv">FOO</span><span class="o">=</span>value</code></pre></figure>

<p>Ao entrar e sair do diretório:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">╭─crivelaro@me:~/
╰─λ <span class="nb">cd </span>project/
direnv: loading .envrc
direnv: <span class="nb">export</span> +FOO
╭─crivelaro@me:~/me
╰─λ <span class="nb">cd</span> ..
direnv: unloading</code></pre></figure>

<p>Assim, a variável de ambiente só fica disponível quando entro no diretório e dessa maneira posso usar a mesma variável para cada tipo de projeto o que é uma prática comum quando se usa projetos parecidos.</p>

<h2 id="adicionando-diretórios-ao-path">Adicionando diretórios ao PATH</h2>

<p>Essa é a funcionalidade que mais gosto do Direnv. Quando monto alguns projetos com um diretório <strong>bin</strong> com alguns shell scripts, acho terrível ter que digitar algo como:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>./meu_script
<span class="nv">$ </span>bin/meu_script</code></pre></figure>

<p>No Linux ou Mac, um binário é chamado de acordo com os diretórios mapeados na variável de ambiente $PATH. O direnv pode configurar o PATH para que se tenha a configuração apenas para aquele projeto.</p>

<p>Para isso, mapeio o PATH para incluir a pasta de binários do projeto dentro do arquivo .envrc:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">PATH_add ./bin</code></pre></figure>

<p>Pronto! Agora qualquer script executável pode ser chamado diretamente como qualquer software no Linux/Mac.</p>

<p>Quando saio do diretório, os binários não estão mais disponíveis pois o PATH voltou ao original.</p>


    </div><!-- .post-content -->
    <div class="post-share">
      <span>Share:</span>
      <a target="_blank"
        href="https://twitter.com/intent/tweet?text=Direnv%20para%20Vari%C3%A1veis%20de%20Ambiente%20e%20PATH&amp;url=http://localhost:4000/tools/2016/11/27/ferramentas-direnv.html" rel="noopener">Twitter</a>
      <a target="_blank"
        href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/tools/2016/11/27/ferramentas-direnv.html&amp;t=Direnv%20para%20Vari%C3%A1veis%20de%20Ambiente%20e%20PATH" rel="noopener">Facebook</a>
    </div><!-- .share-post -->
    <div class="author-box">
      
      <div class="author-avatar" style="background-image: url('images/author.png')"><span class="screen-reader-text">John Doe's Picture</span></div>
      
      <div class="author-details">
        <h2 class="author-title">About John Doe</h2>
        <div class="author-bio"><p>John is a designer, photographer, speaker, author of a couple of books about typography and the founder of photo magazine Curious.</p>
</div>
        
        <span class="author-location">Vilnius, Lithuania</span>
        
        
        <span class="author-website"><a href="https://justgoodthemes.com" target="_blank" rel="noopener">https://justgoodthemes.com</a></span>
        
      </div><!-- .author-details -->
    </div><!-- .author-box -->
  </article><!-- .post -->

  

</main><!-- .main-content -->
      <footer class="site-footer">
  <div class="offsite-links">
    
  </div><!-- .offsite-links -->
  <div class="footer-bottom">
    <div class="site-info">
      

    </div><!-- .site-info -->
    <a href="#page" id="back-to-top" class="back-to-top"><span class="screen-reader-text">Back to the top </span>&#8593;</a>
  </div><!-- .footer-bottom -->
</footer><!-- .site-footer -->

    </div><!-- .inner -->
  </div><!-- .site -->

  <!-- Scripts -->
  
  <script src="/assets/js/plugins.js"></script>
  <script src="/assets/js/custom.js"></script>

</body>
</html>